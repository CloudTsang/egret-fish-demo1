var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},__extends=function(e,t){function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},__rest=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},__decorate=function(e,t,n,r){var o,i=arguments.length,a=3>i?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(3>i?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},__param=function(e,t){return function(n,r){t(n,r,e)}},__metadata=function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},__awaiter=function(e,t,n,r){function o(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())})},__generator=function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=2&n[0]?i["return"]:n[0]?i["throw"]||((a=i["return"])&&a.call(i),0):i.next)&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(r){n=[6,r],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},__exportStar=function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||__createBinding(t,e,n)},__createBinding=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},__values=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-->0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e},__spreadArrays=function(){for(var e=0,t=0,n=arguments.length;n>t;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;n>t;t++)for(var i=arguments[t],a=0,s=i.length;s>a;a++,o++)r[o]=i[a];return r},__await=function(e){return this instanceof __await?(this.v=e,this):new __await(e)},__asyncGenerator=function(e,t,n){function r(e){p[e]&&(u[e]=function(t){return new Promise(function(n,r){l.push([e,t,n,r])>1||o(e,t)})})}function o(e,t){try{i(p[e](t))}catch(n){c(l[0][3],n)}}function i(e){e.value instanceof __await?Promise.resolve(e.value.v).then(a,s):c(l[0][2],e)}function a(e){o("next",e)}function s(e){o("throw",e)}function c(e,t){e(t),l.shift(),l.length&&o(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,p=n.apply(e,t||[]),l=[];return u={},r("next"),r("throw"),r("return"),u[Symbol.asyncIterator]=function(){return this},u},__asyncDelegator=function(e){function t(t,o){n[t]=e[t]?function(n){return(r=!r)?{value:__await(e[t](n)),done:"return"===t}:o?o(n):n}:o}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n},__asyncValues=function(e){function t(t){r[t]=e[t]&&function(r){return new Promise(function(o,i){r=e[t](r),n(o,i,r.done,r.value)})}}function n(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=e[Symbol.asyncIterator];return o?o.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),r={},t("next"),t("throw"),t("return"),r[Symbol.asyncIterator]=function(){return this},r)},__makeTemplateObject=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__setModuleDefault=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t},__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return __setModuleDefault(t,e),t},__importDefault=function(e){return e&&e.__esModule?e:{"default":e}},__classPrivateFieldGet=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},__classPrivateFieldSet=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},__reflect=function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n};!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(t){return e[t]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){n(1),n(2),n(0),n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18),n(19),n(20),n(21),n(22),n(23),n(24),n(25),n(26),n(27);var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),LifecycleCallback.addFunc("ticker",function(){egret.ticker.pause()},function(){egret.ticker.resume()});var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.loadResource()];case 1:return n.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=n.sent(),[4,platform.login()];case 3:return n.sent(),[4,platform.getUserInfo()];case 4:return t=n.sent(),console.log(t),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,this.loadTheme()];case 2:return n.sent(),[4,RES.loadGroup("preload",0,e)];case 3:return n.sent(),this.stage.removeChild(e),[3,5];case 4:return t=n.sent(),console.error(t),[3,5];case 5:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,n){var r=new eui.Theme("resource/default.thm.json",e.stage);r.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){var e=new PlayScene;e.width=this.stage.stageWidth,e.height=this.stage.stageHeight,this.addChild(e)},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t},t}(eui.UILayer);window.Main=r,__reflect(r.prototype,"Main",[])},function(e,t){var n=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function r(r){t.call(n,r,e)}if(RES.hasRes(e)){var o=RES.getRes(e);o?r(o):RES.getResAsync(e,r,this)}else RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_IMAGE)},e}();window.AssetAdapter=n,__reflect(n.prototype,"AssetAdapter",["eui.IAssetAdapter"])},function(e,t){var n=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);window.LoadingUI=n,__reflect(n.prototype,"LoadingUI",["RES.PromiseTaskReporter"])},function(e,t){var n=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();window.DebugPlatform=n,__reflect(n.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new n)},function(e,t){var n=function(){function e(){}return e.prototype.getTheme=function(e,t,n,r){function o(e){t.call(r,e)}function i(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),n.call(r))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(r,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,n){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(r,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var s=e.replace(".exml","_EUI.json");generateJSON.paths[e]?egret.callLater(function(){t.call(r,generateJSON.paths[e])},this):RES.getResByUrl(s,function(n){window.JSONParseClass.setData(n),egret.callLater(function(){t.call(r,generateJSON.paths[e])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(r,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT)},e}();window.ThemeAdapter=n,__reflect(n.prototype,"ThemeAdapter",["eui.IThemeAdapter"])},function(e,t){var n=function(e){function t(){var t=e.call(this)||this;return t._lastCollisionRefreshPoint=null,t}return __extends(t,e),t.prototype.draw=function(){},t.prototype.refresh=function(){this.position=new egret.Point(this.x,this.y)},t.prototype.dispose=function(){},t.prototype.refreshCollisionPoints=function(){var e=this;e._collisionPoints&&e._lastCollisionRefreshPoint!=e.position&&(e.collisionPoints=e._collisionPoints.map(function(t,n){return e.parent?e.localToGlobal(t.x,t.y):t}),e._lastCollisionRefreshPoint=e.position)},t}(egret.Sprite);window.BaseCharacter=n,__reflect(n.prototype,"BaseCharacter",[])},function(e,t){var n=function(){function e(e){this._arr=[],this._func=e}return e.prototype.getOne=function(){for(var e=null,t=0,n=this._arr;t<n.length;t++){var r=n[t];if(!r.activate){e=r;break}}return e||(e=this._func(),this._arr.push(e)),e.activate=!0,e},e.prototype.recycle=function(e){void 0===e&&(e=null);var t=e.target;t.activate=!1},e.prototype.dispose=function(){this._arr=null,this._func=null},e}();window.Pool=n,__reflect(n.prototype,"Pool",[])},function(e,t){var n=function(e){function t(){var t=e.call(this)||this;return t.activate=!1,t._stage=egret.MainContext.instance.stage,t.moveData=new MoveData,t.moveData.setData(0,50),t._damage=1,t.size=30,t.draw(),t}return __extends(t,e),t.prototype.draw=function(){var e=this.size,t=new egret.Bitmap(RES.getRes("bullet_png")),n=t.width/t.height;t.width=e,t.height=t.width/n,t.x=-e/2,t.y=-e/2,this.addChild(t),this._sp=t,this._sp.visible=!0},t.prototype.shot=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.activate=!0},t.prototype.setDirection=function(e,t){void 0===e&&(e=0),void 0===t&&(t=-1),-1==t&&(t=this.moveData.speed),this.moveData.setData(e,t),this.rotation=e},t.prototype.refresh=function(){var t=this;if(t.activate){var n=t.moveData.getDAxis(),r=n.dx,o=n.dy;t.x+=r,t.y+=o,t.y<-100||t.x<-100||t.y>t._stage.stageHeight||t.x>t._stage.stageWidth?t.dispose():e.prototype.refresh.call(this)}},t.prototype.collisionCheck=function(e){var t=this;if(!t.position)return!1;var n=egret.Point.distance(e.position,t.position);return n>200?!1:e.collisionSp.hitTestPoint(t.position.x,t.position.y)},t.prototype.dispose=function(e){void 0===e&&(e=!0),this.activate=!1,this.parent&&this.parent.removeChild(this)},Object.defineProperty(t.prototype,"damage",{get:function(){return this._damage},enumerable:!1,configurable:!0}),t.allArr=[],t.pool=new Pool(function(){var e=new t;return t.allArr.push(e),e}),t}(BaseCharacter);window.Bullet=n,__reflect(n.prototype,"Bullet",["IPoolObject"])},function(e,t){var n=function(e){function t(){var t=e.call(this)||this,n=t,r=egret.MainContext.instance.stage.frameRate;return n._fireSpan=[.8*r,.7*r,.6*r,.5*r,.4*r,.3*r,.2*r],n._fireSpanIndex=0,n._curFireCounter=n._fireSpan[n._fireSpanIndex],t}return __extends(t,e),t.prototype.refresh=function(){var e=this;e._isFire&&(e._curFireCounter--,e._curFireCounter<=0&&(e.fireHandler(),e._fireSpanIndex<e._fireSpan.length-1&&e._fireSpanIndex++,e._curFireCounter=e._fireSpan[e._fireSpanIndex]))},t.prototype.fire=function(){this._isFire=!0},t.prototype.ceaseFire=function(){var e=this;e._isFire=!1,e._fireSpanIndex=0,e._curFireCounter=e._fireSpan[e._fireSpanIndex]},t.prototype.fireHandler=function(){var e=this,t=Bullet.pool.getOne();return t.setDirection(e.rotation),t.x=e.x+(40*Math.random()-20),t.y=e.y,e.parent.addChild(t),t.shot(),SoundManager.instance().playBgs("bullet_mp3"),t},Object.defineProperty(t.prototype,"isStartFireing",{get:function(){return this._fireSpanIndex>0},enumerable:!1,configurable:!0}),t}(eui.Image);window.Canon=n,__reflect(n.prototype,"Canon",[])},function(e,t){var n=function(e){function t(t){var n=e.call(this)||this;n.activate=!1;var r=n;return r.touchEnabled=!1,r._rate=t.rate,r._type=t.type,r._speed=t.speed,r._hp=t.hp,r._maxhp=t.hp,r._score=t.score,r._size=t.size,r._imgUrl=t.imgUrl,r._hpreset=Math.random()>t.hpNotReset,r.draw(),t.filterFunc&&(r._img.filters=[t.filterFunc()]),r._img.cacheAsBitmap=!0,r._imgContainer.cacheAsBitmap=!0,r.rotation=-90,r.moveData=new MoveData,r.moveData.setData(r.rotation,r._speed),r._maxMoveCounter=egret.MainContext.instance.stage.frameRate,r._curMoveCounter=0,r._dRotation=r.rotation,r._whiteCounter=100,r._collisionPoints=[new egret.Point(0,0),new egret.Point(r._img.width,0),new egret.Point(0,r._img.height),new egret.Point(r._img.width,r._img.height),new egret.Point(r._img.width/2,r._img.height/2)],n}return __extends(t,e),t.prototype.draw=function(){var e=this,t=RES.getRes(e._imgUrl),n=new egret.Bitmap(t);n.width=e._size,n.height=1.5*e._size;var r=RES.getRes("fishParticle_json");r.startSize=.75*e._size;var o=new particle.GravityParticleSystem(t,r);o.initConfig,o.x=n.width/2,o.y=n.height,e.addChild(o),o.start();var i=new egret.Sprite;i.graphics.beginFill(0),i.graphics.drawRect(0,0,n.width,n.height),i.graphics.endFill(),e.addChild(i);var a=new egret.Sprite;e.addChild(a),a.addChild(n);var s=new egret.Shape;s.graphics.beginFill(16777215,.8),s.graphics.drawRect(0,0,n.width,n.height),s.graphics.endFill(),s.visible=!1,e.addChild(s),e._shp=i,e._img=n,e._imgContainer=a,e._white=s},t.prototype.refresh=function(){var t=this;if(t.activate&&!(t._hp<=0)){t._curMoveCounter--,t._curMoveCounter<=0&&(t._curMoveCounter=t._maxMoveCounter,t._dRotation=-90+Math.floor(30*Math.random())-15),t._dRotation!=t.rotation&&(t.rotation+=t._dRotation>t.rotation?1:-1,t.moveData.setData(t.rotation,t._speed));var n=t.moveData.getDAxis(),r=n.dx,o=n.dy;t.x+=r,t.y+=o,t._white.visible&&(t._whiteCounter--,t._whiteCounter<=0&&(t._white.visible=!1)),t.x<-200?t.dispose():e.prototype.refresh.call(this)}},t.prototype.dispose=function(){var e=this;e._white.visible=!0,setTimeout(function(){(e._hpreset||0==e._hp)&&(e._hp=e._maxhp),e.moveData.setData(-90,e._speed),e._white.visible=!1,e.parent&&e.parent.removeChild(e),e.activate=!1},250)},t.prototype.hit=function(e){var t=this;return t.hp-=e.damage,t._white.visible||(t._white.visible=!0),t._whiteCounter=6,t._hp<=0?(t.dispose(),!0):!1},Object.defineProperty(t.prototype,"hp",{get:function(){return this._hp},set:function(e){e=0>e?0:e,this._hp=e,0==e&&this.dispatchEvent(new egret.Event(GameEvents.FISH_HUNTED))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"collisionSp",{get:function(){return this._shp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rate",{get:function(){return this._rate},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"invisible",{get:function(){return this._white.visible},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"img",{get:function(){return this._img},enumerable:!1,configurable:!0}),t}(BaseCharacter);window.Fish=n,__reflect(n.prototype,"Fish",["IPoolObject"])},function(e,t){var n=function(){function e(){this.arr=[],this.fishData=[{type:1,rate:.3,speed:7,hp:1,score:100,size:80,imgUrl:"795548_png",hpNotReset:0},{type:2,rate:.55,speed:9,hp:2,score:200,size:80,imgUrl:"43a048_png",hpNotReset:.1},{type:3,rate:.7,speed:10,hp:2,score:350,size:70,imgUrl:"aa47bc_png",hpNotReset:.2},{type:4,rate:.85,speed:12,hp:3,score:500,size:60,imgUrl:"d50000_png",hpNotReset:.3},{type:5,rate:.97,speed:15,hp:4,score:700,size:55,imgUrl:"ff6f00_png",hpNotReset:.5},{type:6,rate:.99,speed:12,hp:5,score:10,size:45,imgUrl:"c0ca33_png",hpNotReset:0,filterFunc:function(){return Filters.glowFilter1}},{type:7,rate:1,speed:20,hp:5,score:1e3,size:40,imgUrl:"ffc107_png",hpNotReset:1,filterFunc:function(){return Filters.glowFilter2}}]}return Object.defineProperty(e,"instance",{get:function(){return e._ins},enumerable:!1,configurable:!0}),e.prototype.getOne=function(){for(var e,t,n=Math.random(),r=0,o=this.fishData;r<o.length;r++){var i=o[r];if(i.rate>n){e=i;break}}for(var a=0,s=this.arr;a<s.length;a++){var c=s[a];if(!c.activate&&c.type==e.type){t=c;break}}return t||(t=new Fish(e),this.arr.push(t)),t.activate=!0,t},e._ins=new e,e}();window.FishPool=n,__reflect(n.prototype,"FishPool",[])},function(e,t){var n=function(e){function t(t,n,o,i){var a=e.call(this)||this;return a._maxDmgCounter=5,n==r.TIME&&(t*=egret.MainContext.instance.stage.frameRate),a._index=i,a._totTimes=t,a._times=t,a._unit=n,a._canon=o,a._dmgCounter=a._maxDmgCounter,a}return __extends(t,e),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),t.prototype.shot=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this;n._unit==r.SHOT&&(n._times--,n._times<=0&&n.dispatchEvent(new egret.Event(GameEvents.SP_OVER)))},t.prototype.timePassed=function(){var e=this;e._unit==r.TIME&&(e._times--,e._times<=0&&e.dispatchEvent(new egret.Event(GameEvents.SP_OVER)))},Object.defineProperty(t.prototype,"times",{get:function(){return this._times},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"restTimes",{get:function(){return Math.floor(this._times/this._totTimes*100)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldCollisionCheck",{get:function(){var e=this;return e.position?(e._dmgCounter--,e._dmgCounter>0?!1:(e._dmgCounter=e._maxDmgCounter,!0)):!1},enumerable:!1,configurable:!0}),t}(Bullet);window.SpWeapon=n,__reflect(n.prototype,"SpWeapon",[]);var r;!function(e){e[e.TIME=0]="TIME",e[e.SHOT=1]="SHOT"}(r||(r={})),window.SpWeaponTimesUnit=r},function(e,t){var n=function(e){function t(t,n){var r=e.call(this,5,SpWeaponTimesUnit.TIME,t,n)||this;return r._triggered=!1,r._triggered2=!1,r.position=new egret.Point(t.x,t.y),r}return __extends(t,e),t.prototype.shot=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this;n._triggered||(n._triggered=!0,n.draw(),n.x=n._canon.x,n.y=n._canon.y,n.rotation=n._canon.rotation-90,n._side=n._canon.rotation<0?"L":"R",n._canon.parent&&n._canon.parent.addChildAt(n,1),SoundManager.instance().playBgs("bgs_railgun_mp3"),n._tw=egret.Tween.get(n).to({scaleX:150},500).set({_triggered2:!0}))},t.prototype.dispose=function(){var e=this,t=this;t._tw=egret.Tween.get(t).to({scaleY:0},500).call(function(){t.activate=!1,t.parent&&t.parent.removeChild(e),t._triggered=!1}).play()},t.prototype.timePassed=function(){var e=this;e._triggered&&(e._times--,e._times<=0&&e.dispatchEvent(new egret.Event(GameEvents.SP_OVER)))},t.prototype.collisionCheck=function(e){var t=this;if(t._triggered2){var n=t.shouldCollisionCheck;if(!n)return!1;if("L"==t._side&&e.position.x>t.x)return!1;if("R"==t._side&&e.position.x<t.x)return!1;for(var r=0,o=e.collisionPoints;r<o.length;r++){var i=o[r];if(t.hitTestPoint(i.x,i.y))return!0}return!1}},t.prototype.draw=function(){var e=this,t=60,n=1.5*t,r=new egret.Sprite;r.graphics.beginFill(16777215),r.graphics.drawRect(0,0,2e3,t),r.graphics.endFill();var o=new egret.GlowFilter(8900331,.3,10,10,20,1,!0,!1);r.filters=[o];var i=new egret.Shape;i.graphics.beginFill(16777215),i.graphics.drawRoundRect(0,0,10,t,n,n),i.graphics.endFill(),e.addChild(r),e.addChild(i),e.anchorOffsetY=t/2,r.mask=i,e._sp=r,e._mask=i,e._filter=o},t}(SpWeapon);window.Laser=n,__reflect(n.prototype,"Laser",[])},function(e,t){var n=function(e){function t(t,n){var r=e.call(this,3,SpWeaponTimesUnit.SHOT,t,n)||this;return r._missles=[],r.position=new egret.Point(t.x,t.y),r._maxDmgCounter=3,r}return __extends(t,e),t.prototype.timePassed=function(){for(var e=0,t=0,n=this._missles;t<n.length;t++){var r=n[t];r.refresh(),e+=r.overed?1:0}3==e&&this.dispatchEvent(new egret.Event(GameEvents.SP_OVER))},t.prototype.shot=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this;if(!(n._times<=0)){var r=n.drawMissle();n._canon.parent.addChildAt(r,1),n._missles.push(r),n._times--}},t.prototype.drawMissle=function(){var e=this,t=.8*egret.MainContext.instance.stage.stageHeight;Math.abs(e._canon.rotation)>45&&(t=egret.MainContext.instance.stage.stageHeight);var n=new r(t);return n.setDirection(e._canon.rotation),n.x=e._canon.x,n.y=e._canon.y,n},t.prototype.collisionCheck=function(e){var t=this,n=t.shouldCollisionCheck;if(!n)return!1;for(var r=0,o=t._missles;r<o.length;r++){var i=o[r],a=i.crashSp;if(a){var s=a.width*a.scaleX/2,c=egret.Point.distance(i.position,e.position);if(s>c)return!0}}},t}(SpWeapon);window.MissleLauncher=n,__reflect(n.prototype,"MissleLauncher",[]);var r=function(e){function t(t,n){void 0===n&&(n=20);var r=e.call(this)||this;return r._aniTime=Math.round(t/n),r.moveData=new MoveData,r.moveData.setData(0,n),r._blasted=!1,r._overed2=!1,r.draw(),r}return __extends(t,e),Object.defineProperty(t.prototype,"overed",{get:function(){return this._overed},enumerable:!1,configurable:!0}),t.prototype.setDirection=function(e,t){void 0===e&&(e=0),void 0===t&&(t=-1),-1==t&&(t=this.moveData.speed),this.moveData.setData(e,t),this.rotation=e},t.prototype.refresh=function(){var e=this;if(!e._overed2)if(0==e._aniTime)e._blasted?(e._overed2=!0,egret.Tween.get(e._sp).to({alpha:0},500).call(function(){e._overed=!0,e._sp.parent&&e._sp.parent.removeChild(e._sp),e._sp=null})):(e._aniTime=21,e.blast(),e.position=new egret.Point(e.x,e.y),SoundManager.instance().playBgs("explode_mp3"));else if(e._blasted)e._aniTime--,e._sp.scaleX+=.15,e._sp.scaleY+=.15;else{e._aniTime--;var t=e.moveData.getDAxis(),n=t.dx,r=t.dy;e.x+=n,e.y+=r}},t.prototype.draw=function(){var e=new egret.Bitmap(RES.getRes("misslep_png"));e.scaleX=2,e.scaleY=2,e.anchorOffsetX=e.width/2,this._sp=e,this.addChild(e)},t.prototype.blast=function(){var e=this,t=e._sp.parent;e._sp&&t.removeChild(e._sp);var n=new egret.Bitmap(RES.getRes("blast_png"));n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,n.scaleX=.1,n.scaleY=.1,t.addChild(n),e._sp=n,e._blasted=!0},Object.defineProperty(t.prototype,"crashSp",{get:function(){return this._blasted?this._sp:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"crashSpR",{get:function(){return this._blasted?this._sp.width*this._sp.scaleX/2:-1},enumerable:!1,configurable:!0}),t}(BaseCharacter);window.Missle=r,__reflect(r.prototype,"Missle",[])},function(e,t){var n=function(){function e(){this.data={deg:void 0,rad:void 0,spd:void 0,sin:void 0,cos:void 0},this._dx=0,this._dy=0}return Object.defineProperty(e.prototype,"speed",{get:function(){return this.data.spd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sin",{get:function(){return this.data.sin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cos",{get:function(){return this.data.cos},enumerable:!1,configurable:!0}),e.prototype.setData=function(e,t){var n=this.data;if(n.deg!=e||n.spd!=t){if(n.deg!=e){var r=e*Math.PI/180,o=Math.sin(r),i=Math.cos(r);n=__assign(__assign({},n),{deg:e,rad:r,sin:o,cos:i})}this._dx=t*n.sin,this._dy=t*n.cos,n=__assign(__assign({},n),{spd:t}),this.data=n}},e.prototype.getDAxis=function(){return{dx:this._dx,dy:-this._dy}},e}();window.MoveData=n,__reflect(n.prototype,"MoveData",[])},function(e,t){var n=function(e){function t(t,n){var r=e.call(this,15,SpWeaponTimesUnit.TIME,t,n)||this;return r._stayTime=3*egret.MainContext.instance.stage.frameRate,r._tmpX=-1,r._tmpY=-1,r._phrase=4,r}return __extends(t,e),t.prototype.timePassed=function(){var t=this;if(t._sp&&4!=t._phrase)if(t._sp.rotation+=8,t._aniTime>0)switch(t._phrase){case 1:var n=t.moveData.getDAxis(),r=n.dx,o=n.dy;t._sp.x+=r,t._sp.y+=o,t._line.graphics.lineTo(t._sp.x,t._sp.y),t._aniTime--,t.position=new egret.Point(t._sp.x,t._sp.y);break;case 2:t._aniTime--}else if(0==t._aniTime)switch(t._phrase){case 1:-1!=t._tmpX&&-1!=t._tmpY||(t._aniTime=t._stayTime),t.position=new egret.Point(t._sp.x,t._sp.y),t._phrase=2;break;case 2:t._phrase=3,SoundManager.instance().playBgs("yoyo_mp3"),t._backTw=egret.Tween.get(t).to({spX:t._canon.x,spY:t._canon.y,refreshLine:1},500).call(function(){return t._phrase=4,t._shouldDispose?void t.dispose():void(-1!=t._tmpX&&-1!=t._tmpY?t.shot(t._tmpX,t._tmpY):t._sp.parent&&t._sp.parent.removeChild(t._sp))})}e.prototype.timePassed.call(this)},t.prototype.shot=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this;if(4!=n._phrase)return 2==n._phrase&&(n._aniTime=0),n._tmpX=e,void(n._tmpY=t);n._sp.parent||(n._canon.parent.addChildAt(n._sp,1),n._canon.parent.addChildAt(n._line,1)),n._sp.x=n._canon.x,n._sp.y=n._canon.y,n._line.graphics.moveTo(n._sp.x,n._sp.y);var r=.8*egret.MainContext.instance.stage.stageHeight,o=30;Math.abs(n._canon.rotation)>45&&(r=egret.MainContext.instance.stage.stageHeight),n._aniTime=Math.round(r/o),n.moveData.setData(n._canon.rotation,o),n._phrase=1,n._tmpX=-1,n._tmpY=-1,SoundManager.instance().playBgs("yoyo_mp3")},t.prototype.dispose=function(){var e=this;return 4!=e._phrase?(e._shouldDispose=!0,void(e._backTw||(e._backTw=egret.Tween.get(e._sp).to({x:e._canon.x,y:e._canon.y},500).call(function(){e._phrase=4,e.dispose()})))):(e._sp.parent&&e._sp.parent.removeChild(e._sp),void(e.parent&&e.parent.removeChild(e)))},t.prototype.collisionCheck=function(e){var t=this,n=t.shouldCollisionCheck;if(!n)return!1;if(!t._sp)return!1;if(4==t._phrase||3==t._phrase)return!1;var r=egret.Point.distance(t.position,e.position);return r<t._r?!0:void 0},t.prototype.draw=function(){var e=new egret.Bitmap(RES.getRes("yoyop_png"));e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.scaleX=3,e.scaleY=3,this._sp=e,this._r=e.width*e.scaleX/2;var t=new egret.Shape;t.graphics.lineStyle(6,0),this._line=t},Object.defineProperty(t.prototype,"spX",{get:function(){return this._sp.x},set:function(e){this._sp.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spY",{get:function(){return this._sp.y},set:function(e){this._sp.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"refreshLine",{get:function(){return 0},set:function(e){var t=this;t._line.graphics.clear(),t._line.graphics.lineStyle(6,0),t._line.graphics.moveTo(t._canon.x,t._canon.y),t._line.graphics.lineTo(t._sp.x,t._sp.y)},enumerable:!1,configurable:!0}),t}(SpWeapon);window.Yoyo=n,__reflect(n.prototype,"Yoyo",[])},function(e,t){var n=function(){function e(){}return e.FISH_HUNTED="FISH_HUNTED",e.SP_CHOSEN="SP_CHOSEN",e.SP_OVER="SP_OVER",e}();window.GameEvents=n,__reflect(n.prototype,"GameEvents",[])},function(e,t){var n=function(){function e(e,t){this._w=0,this._target=e,this._mask=new egret.Shape,this._mask.x=e.x+t,this._mask.y=e.y+t,e.parent.addChildAt(this._mask,e.parent.getChildIndex(this._target)+1),this._target.mask=this._mask,this._w=t,this.cur=0}return e.prototype.dispose=function(){this._target.visible=!1,this._target.parent.removeChild(this._mask)},e.prototype.setProgress=function(e,t){if(this._mask&&e!=this.cur){if(this.cur=e,this._mask.graphics.clear(),e>=t)return this._mask.graphics.beginFill(0),this._mask.graphics.drawRect(-this._w,-this._w,2*this._w,2*this._w),void this._mask.graphics.endFill();this._mask.graphics.beginFill(0,1),this._mask.graphics.lineStyle(1),this._mask.graphics.moveTo(0,0);var n,r,o=360*e/t,i=Math.PI/180*o,a=0;45>=o?(n=this._w*Math.tan(i),r=-this._w,a=1):90>=o?(n=this._w,r=-this._w*Math.tan(Math.PI/180*90-i),a=2):135>=o?(n=this._w,r=this._w*Math.tan(i-Math.PI/180*90),a=3):180>=o?(r=this._w,n=this._w*Math.tan(Math.PI-i),a=4):225>=o?(r=this._w,n=-this._w*Math.tan(i-Math.PI),a=5):270>=o?(n=-this._w,r=this._w*Math.tan(Math.PI/180*270-i),a=6):315>=o?(n=-this._w,r=-this._w*Math.tan(i-Math.PI/180*270),a=7):(r=-this._w,n=-this._w*Math.tan(2*Math.PI-i),a=8),this._mask.graphics.lineTo(n,r),this.drawRect(a)}},e.prototype.drawRect=function(t){for(t;t>=0;t--){var n=e._drawRectPoints[t];this._mask.graphics.lineTo(n[0]*this._w,n[1]*this._w)}this._mask.graphics.endFill()},e._drawRectPoints=[[0,0],[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]],e}();window.CoolingQueueMcForCircle=n,__reflect(n.prototype,"CoolingQueueMcForCircle",[])},function(e,t){var n=function(){function e(){}return e.glowFilter1=new egret.DropShadowFilter(0,0,16765191,.8,110,110,5,1),e.glowFilter2=new egret.GlowFilter(16765191,.5,100,100,5,1),e}();window.Filters=n,__reflect(n.prototype,"Filters",[])},function(e,t){var n=function(e){function t(){var t=e.call(this)||this;return t.maxFish=30,t.maxSpChooseCounter=1e3,t.maxCollisionCheckCounter=1,t.skinName="resource/eui_skins/skin/PlayScene.exml",t.touchEnabled=!0,t.touchChildren=!0,t._score=0,t.once(eui.UIEvent.CREATION_COMPLETE,t.onComplete,t),t
}return __extends(t,e),t.prototype.onComplete=function(e){var t=this;t.collisionCheckCounter=t.maxCollisionCheckCounter,t.spChooseCounter=t.maxSpChooseCounter,t.area.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onTouchDown,t),t.area.addEventListener(egret.TouchEvent.TOUCH_END,t.onTouchUp,t),t.area.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,t.onTouchUp,t),t.area.addEventListener(egret.TouchEvent.TOUCH_MOVE,t.onTouchMove,t),t.sppanel.addEventListener(GameEvents.SP_CHOSEN,t.onSpChosen,t),t.canon.x=(t.stage.stageWidth-t.canon.width)/2,t.canon.y=t.stage.stageHeight-(t.canon.height-t.canon.anchorOffsetY),t.addEventListener(egret.Event.ENTER_FRAME,t.refresh,t),t.sppanel.pState=WeaponState.NULL,t.spIndex=0,t.sppanel.pState=WeaponState.NORMAL;var n=FishPool.instance.getOne();n.x=500,n.y=300,t.addChild(n)},t.prototype.refresh=function(e){var t=this;t.canon.refresh();for(var n=0,r=Bullet.allArr;n<r.length;n++){var o=r[n];o.activate&&o.refresh()}for(var i=0,a=0,s=FishPool.instance.arr;a<s.length;a++){var c=s[a];c.activate&&(i++,c.refresh(),c.refreshCollisionPoints())}if(t.spWeapon&&(t.spWeapon.timePassed(),t.spGauge&&t.spGauge.refresh()),t.collisionCheckCounter--,t.collisionCheckCounter<=0){t.collisionCheckCounter=t.maxCollisionCheckCounter;for(var u=0,p=FishPool.instance.arr;u<p.length;u++){var c=p[u];if(c.activate&&!c.invisible){for(var l=!1,h=0,f=Bullet.allArr;h<f.length;h++){var o=f[h];if(o.activate){var _=o.collisionCheck(c);if(_&&(o.dispose(),l=c.hit(o)))break}}if(l)t.addScore(c.score);else if(c.activate&&!c.invisible){if(t.spWeapon){var _=t.spWeapon.collisionCheck(c);_&&(l=c.hit(t.spWeapon))}l&&t.addScore(c.score)}}}}if(i<t.maxFish){var d=Math.random();if(.2>d){var c=FishPool.instance.getOne();c.x=t.width+100,c.y=Math.floor(300*Math.random())+200,t.addChild(c),c.img.cacheAsBitmap=!0}}},t.prototype.onTouchDown=function(e){var t=this;t.onTouchMove(e),t.touchDownY=e.stageY,t.canon.fire()},t.prototype.onTouchUp=function(e){var t=this;if(!t.canon.isStartFireing&&t.spWeapon){var n=e.stageY;t.touchDownY-n>=200&&t.spWeapon.shot()}t.canon.ceaseFire()},t.prototype.onTouchMove=function(e){var t=this,n=e.stageX,r=e.stageY,o=(n-t.canon.x)/(r-t.canon.y),i=180*Math.atan(o)/Math.PI;t.canon.rotation=-i},t.prototype.onSpChosen=function(e){var t=this;t.sppanel.pState=e.data.type;var n;switch(e.data.type){case WeaponState.LASER:t.spWeapon=new Laser(t.canon,t.spIndex),n=t.sppanel.gaugeLaser;break;case WeaponState.MISSLE:t.spWeapon=new MissleLauncher(t.canon,t.spIndex),n=t.sppanel.gaugeMissle;break;case WeaponState.YOYO:t.spWeapon=new Yoyo(t.canon,t.spIndex),n=t.sppanel.gaugeYoyo;break;default:return}t.spIndex++,t.spWeapon.once(GameEvents.SP_OVER,t.onSpOver,t),t.spGauge=new SpGauge(t.spWeapon,n,n.width/2)},t.prototype.onSpOver=function(e){var t=this,n=e.currentTarget;n.dispose(),n.index==t.spIndex&&(t.sppanel.pState=WeaponState.NULL,t.spGauge&&t.spGauge.dispose(),t.spGauge=null,t.spWeapon=null)},t.prototype.addChild=function(e){return this.layer.addChild(e)},t.prototype.addScore=function(e){var t=this;t.spChooseCounter-=e,t.spChooseCounter<=0&&(t.spChooseCounter=t.maxSpChooseCounter,t.sppanel.pState=WeaponState.NORMAL,t.spGauge&&t.spGauge.dispose(),t.spGauge=null),t._score+=e,t.txtScore.text=""+t._score},t}(eui.Component);window.PlayScene=n,__reflect(n.prototype,"PlayScene",[])},function(e,t){var n=function(e){function t(t,n,r){var o=e.call(this,n,r)||this;return o._sp=t,n.visible=!0,o.setProgress(100,100),o}return __extends(t,e),t.prototype.refresh=function(){var e=this._sp.restTimes;this.setProgress(e,100)},t}(CoolingQueueMcForCircle);window.SpGauge=n,__reflect(n.prototype,"SpGauge",[])},function(e,t){var n=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/skin/sppanel.exml",t.touchEnabled=!1,t.touchChildren=!0,t.once(eui.UIEvent.CREATION_COMPLETE,t.onComplete,t),t}return __extends(t,e),t.prototype.onComplete=function(e){var t=this;t.addEventListener("touchTap",t.onClick,t),t._pintTw=egret.Tween.get(t.pint,{loop:!0}).to({y:-20},200).to({y:0},100).wait(500),t._pintTw.setPaused(!0)},Object.defineProperty(t.prototype,"pState",{set:function(e){var t=this;switch(e!=r.NORMAL&&t._pintTw.setPaused(!0),console.log(e),e){case r.NULL:t.visible=!1;break;case r.NORMAL:t.visible=!0,t.currentState="normal",t._pintTw.setPaused(!1);break;case r.LASER:t.currentState="laser";break;case r.MISSLE:t.currentState="missle";break;case r.YOYO:t.currentState="yoyo"}},enumerable:!1,configurable:!0}),t.prototype.onClick=function(e){var t=this;if("normal"==t.currentState){var n=new egret.Event(GameEvents.SP_CHOSEN);switch(e.target){case t.btnLaser:console.log("选择特殊武器：激光"),n.data={type:r.LASER};break;case t.btnMissle:console.log("选择特殊武器：炮弹"),n.data={type:r.MISSLE};break;case t.btnYoyo:console.log("选择特殊武器：铁球"),n.data={type:r.YOYO}}t.dispatchEvent(n)}},t}(eui.Component);window.SpWeaponPanel=n,__reflect(n.prototype,"SpWeaponPanel",[]);var r;!function(e){e[e.NULL=0]="NULL",e[e.NORMAL=1]="NORMAL",e[e.LASER=2]="LASER",e[e.MISSLE=3]="MISSLE",e[e.YOYO=4]="YOYO"}(r||(r={})),window.WeaponState=r},function(e,t){var n,n=window.CollisionUtils;!function(e){function t(e,t,n){var r=n.length;if(3>r)return!1;var o=0,i=[];for(o=0;o<n.length;o++){var a=new egret.Point(n[o].x,n[o].y);i.push(a)}for(o=0;o<i.length;o++)i[o].x+=t.x,i[o].y+=t.y;if(this.vectorCrossPoint(i[0],e,i[1])>0)return!1;if(this.vectorCrossPoint(i[0],e,i[r-1])<0)return!1;o=2;for(var s=r-1,c=-1;s>=o;){var u=o+s>>1;this.vectorCrossPoint(i[0],e,i[u])>0?(c=u,s=u-1):o=u+1}return 0>c?!1:this.vectorCrossPoint(i[c-1],e,i[c])<0}function n(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}e.checkPointCollideShape=t,e.vectorCrossPoint=n}(n||(n={})),window.CollisionUtils=n},function(e,t){var n=function(){function e(){}return e.regist=function(){egret.lifecycle.onPause=this.onPause,egret.lifecycle.onResume=this.onResume},e.addFunc=function(t,n,o){e.map[t]=new r(n,o)},e.removeFunc=function(t){delete e.map[t]},e.onPause=function(){for(var t in e.map)e.map[t].onPause()},e.onResume=function(){for(var t in e.map)e.map[t].onResume()},e.map={},e}();window.LifecycleCallback=n,__reflect(n.prototype,"LifecycleCallback",[]);var r=function(){function e(e,t){this.onPause=e,this.onResume=t}return e}();window.LcyObj=r,__reflect(r.prototype,"LcyObj",[])},function(e,t){var n=function(){function e(){this.HTTP_URL="https://xxxx"}return e.prototype.dataFormat=function(e){if(e){var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")}return""},e.prototype.getToken=function(){return sessionStorage.getItem("token")},e.prototype.requestGetImg=function(e,t){var n=this;return new Promise(function(r,o){var i=new egret.HttpRequest;n.dataFormat(t);i.responseType=egret.HttpResponseType.TEXT,i.open(e,egret.HttpMethod.GET),i.send(),i.addEventListener(egret.Event.COMPLETE,function(e){r()},n),i.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){o(e)},n)})},e.prototype.requestGet=function(e,t){var n=this;return new Promise(function(r,o){var i=new egret.HttpRequest,a=n.dataFormat(__assign(__assign({},t),{ucode:n.getToken()}));i.responseType=egret.HttpResponseType.TEXT,i.open(n.HTTP_URL+e+"?"+a,egret.HttpMethod.GET),i.send(),i.addEventListener(egret.Event.COMPLETE,function(e){var t=e.currentTarget;r(JSON.parse(t.response))},n)})},e.prototype.requestPost=function(e,t){var n=this;return new Promise(function(r,o){var i=new egret.HttpRequest,a=n.dataFormat(__assign(__assign({},t),{ucode:n.getToken()}));i.responseType=egret.HttpResponseType.TEXT,i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.open(n.HTTP_URL+e,egret.HttpMethod.POST),i.send(a),i.addEventListener(egret.Event.COMPLETE,function(e){var t=e.currentTarget;t.response?r(JSON.parse(t.response)):(console.log("系统出错，请稍后再试"),o(e))},n),i.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){console.log("服务器连接失败，请稍后再试")},n)})},e}();window.RequestUtil=n,__reflect(n.prototype,"RequestUtil",[])},function(e,t){var n=function(){function e(){}return e.Debug=!1,e.env="pro",e}();window.Setting=n,__reflect(n.prototype,"Setting",[])},function(e,t){var n=function(){function e(){var e=this;LifecycleCallback.addFunc("bgm",function(){e.pause()},function(){e.resume()}),this._bgs={},this._defaultVolume=0}return e.prototype.play=function(e,t){void 0===t&&(t=!0),this._bgm&&this._bgmChannel.stop(),this._bgm=RES.getRes(e),this._bgm.type=egret.Sound.MUSIC;try{if(this._isPausing)return;this._bgmChannel=this._bgm.play(0,t?0:1),this._bgmChannel.volume=this._defaultVolume}catch(n){console.error(n)}},e.prototype.playBgs=function(e,t){void 0===t&&(t=1);var n;return(n=this._bgs[e]?this._bgs[e]:RES.getRes(e))?(n.play(0,t).volume=.2,n):void 0},e.prototype.resume=function(){this._isPausing=!1,this._bgm&&this._bgmChannel&&(this._bgmChannel=this._bgm.play(this._bgmPosition,1),this._bgmChannel.volume=this._defaultVolume,this._bgmChannel.addEventListener(egret.Event.SOUND_COMPLETE,this.onResumeOver,this))},e.prototype.onResumeOver=function(e){this._bgm&&this._bgmChannel&&(this._bgmChannel=this._bgm.play(0,0),this._bgmChannel.volume=this._defaultVolume)},e.prototype.pause=function(){this._isPausing=!0,this._bgm&&this._bgmChannel&&(this._bgmPosition=this._bgmChannel.position,this._bgmChannel.stop())},e.prototype.stop=function(){this._bgm&&this._bgmChannel&&(this._bgmChannel.stop(),this._bgmChannel=null,this._bgm=null)},e.instance=function(){return e._ins||(e._ins=new e),e._ins},e}();window.SoundManager=n,__reflect(n.prototype,"SoundManager",[])},function(e,t){var n=function(){function e(e){this.p=e,console.log(e)}return e.print=function(e){Setting.Debug&&console.log(e)},e.RoundRect=function(e,t,n){void 0===n&&(n=10);var r=new egret.Shape;r.graphics.beginFill(2631720),r.graphics.drawRoundRect(0,0,e.width,e.height,n,n),r.graphics.endFill(),r.y=e.x,r.x=e.y,t.addChild(r),e.mask=r},e.pressBtn=function(e,t){e.addEventListener(egret.TouchEvent.TOUCH_END,function(){t&&t()},this)},e.touchBtn=function(e,t,n){e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){egret.Tween.get(e).to({scaleX:.8,scaleY:.8},80,egret.Ease.cubicIn).call(function(){n&&n()})},this),e.addEventListener(egret.TouchEvent.TOUCH_END,function(){egret.Tween.get(e).to({scaleX:1,scaleY:1},100,egret.Ease.cubicIn).call(function(){egret.Tween.removeTweens(e),t&&t()})},this),e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,function(){egret.Tween.get(e).to({scaleX:1,scaleY:1},100,egret.Ease.cubicIn).call(function(){egret.Tween.removeTweens(e),t&&t()})})},e.itemTap=function(e,t){e.addEventListener(eui.ItemTapEvent.ITEM_TAP,function(n){var r=-1!=e.selectedIndex?e.selectedIndex:null,o=e.$indexToRenderer[r].$children[0];egret.Tween.get(o).to({scaleX:.9,scaleY:.9},80).to({scaleX:1,scaleY:1},50).call(function(){t&&t(e.selectedItem,r),egret.Tween.removeTweens(o)})},this)},e.ListChildClick=function(t,n,r){var o=t.$indexToRenderer;o.forEach(function(t,o){var i=t.$children[0],a=i.$children[n];e.touchBtn(a,function(){r(i,o)})})},e.dargMove=function(e,t,n,r,o,i,a){function s(e){if(l)if(2==_){if(2==p.names.length){p[e.touchPointID].x=e.stageX,p[e.touchPointID].y=e.stageY;var n=c();a&&a(n/f,d)}}else t.x=e.stageX-h.x,t.y=e.stageY-h.y,d.x=t.x,d.y=t.y,o&&o(function(e){l=e,(l=!1)&&(p={names:[]},_=0)})}function c(){var e=0,t=p.names;return e=egret.Point.distance(p[t[t.length-1]],p[t[t.length-2]])}var u=this;void 0===n&&(n=!1);var p={names:[]},l=!1,h=new egret.Point,f=0,_=0,d={x:t.x,y:t.y};t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(o){null==p[o.touchPointID]&&1==n&&(p[o.touchPointID]=new egret.Point(o.stageX,o.stageY),p.names.push(o.touchPointID)),l=!0,_++,2==_?f=c():(h.x=o.stageX-t.x,h.y=o.stageY-t.y,r&&r(h)),e.addEventListener(egret.TouchEvent.TOUCH_MOVE,s,u)},this),t.addEventListener(egret.TouchEvent.TOUCH_END,function(t){l=!1,p={names:[]},_=0,i&&i(),e.removeEventListener(egret.TouchEvent.TOUCH_MOVE,s,u)},this)},e.createBitmapByName=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t.texture},e.deepCopyObj=function(e){var t=Array.isArray(e)?[]:{};for(var n in e)e.hasOwnProperty(n)&&("object"==typeof e[n]&&null!==e[n]?t[n]=this.deepCopyObj(e[n]):t[n]=e[n]);return t},e.getUrlParam=function(e,t){var n=new RegExp("(\\?|&)"+e+"=([^&#]*)"),r=n.exec(t?t:location.href);return null!=r?decodeURIComponent(r[2]):null},e}();window.Tool=n,__reflect(n.prototype,"Tool",[])}]);